name: "postgrest"
arch: "amd64"
platform: "linux"
version: "v14.3"
release: "1"
version_schema: semver
description: PostgREST serves a fully RESTful API from any existing PostgreSQL database.
maintainer: Ruohang Feng <rh@vonng.com>
vendor: "PostgREST"
homepage: "https://github.com/PostgREST/postgrest"
license: "MIT"

contents:

  # binary file
  - src: postgrest/postgrest
    dst: /usr/bin/postgrest
    file_info:
      mode: 0755

  # config directory
  - dst: /etc/postgrest/
    type: dir
    file_info:
      mode: 0755

  # config file
  - src: src/postgrest.conf
    dst: /etc/postgrest/postgrest.conf
    type: config|noreplace
    file_info:
      mode: 0640

  # default environment file
  - src: src/default
    dst: /etc/default/postgrest
    type: config|noreplace
    file_info:
      mode: 0640

  # systemd service file
  - src: src/service
    dst: /lib/systemd/system/postgrest.service
    type: config|noreplace

scripts:
  postinstall: src/postinstall.sh
  preremove: src/preremove.sh
